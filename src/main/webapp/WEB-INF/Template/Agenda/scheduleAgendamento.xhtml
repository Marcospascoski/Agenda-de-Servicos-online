<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core">


    <h:form id="form">  

        <p:messages id="mensagens" showDetail="true" />

        <p:schedule widgetVar="agenda" value="#{agendaScheduleBean.eventModel}" style="margin-top: 20px" view="agendaWeek"
                    aspectRatio="3" slotMinutes="60" draggable="false" timeZone="UTC" axisFormat="HH:mm" locale="pt">

            <!-- eventos -->
            <p:ajax event="dateSelect" listener="#{agendaScheduleBean.quandoNovo}" 
                    update="eventDetails" oncomplete="caixaDialogo.show()"/>  
            <p:ajax event="eventSelect" listener="#{agendaScheduleBean.quandoSelecionado}" 
                    update="eventDetails" oncomplete="caixaDialogo.show()"/>  
            <p:ajax event="eventMove" listener="#{agendaScheduleBean.quandoMovido}" 
                    update="mensagens" oncomplete="meucalendario.update()"/>  
            <p:ajax event="eventResize" listener="#{agendaScheduleBean.quandoRedimensionado}" 
                    update="mensagens" oncomplete="meucalendario.update()"/>  

        </p:schedule>

        <p:dialog widgetVar="caixaDialogo" 
                  header="Evento"  width="500"
                  resizable="false" modal="true">  

            <p:outputPanel 
                id="eventDetails">

                <p:panelGrid columns="2" styleClass="semBorda">  

                    <p:outputLabel value="Serviço:" for="servico" /> 
                    <p:selectOneMenu id="servico" value="#{agendaScheduleBean.servico}">
                        <f:selectItem itemLabel="Selecione"/>
                    </p:selectOneMenu>

                    <p:outputLabel value="Descrição:" for="descricao"/> 
                    <p:inputText id="descricao" maxlength="60"/>  

                    <h:outputLabel for="inicio" value="Início:" />  
                    <p:calendar id="inicio" pattern="dd/MM/yyyy HH:mm" locale="pt"/>

                    <p:outputLabel for="fim" value="Fim:" />  
                    <p:calendar id="fim" value="#{agendaScheduleBean.agenda.dataFim}" 
                                pattern="dd/MM/yyyy HH:mm" locale="pt"/>

                    <p:outputLabel for="diaTodo" value="Dia todo?:" />  
                    <p:selectBooleanCheckbox id="diaTodo" />  

                </p:panelGrid>  

                <p:separator/>

                <p:commandButton value="Salvar" oncomplete="meucalendario.update();caixaDialogo.hide();" update="mensagens" />  

            </p:outputPanel>

        </p:dialog>


    </h:form>  


</ui:composition>




